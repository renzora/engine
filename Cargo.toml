[package]
name = "bevy_imgui_editor"
version = "0.1.0"
edition = "2021"
default-run = "renzora_editor"

[features]
default = ["editor", "dynamic"]
editor = ["dep:bevy_egui", "dep:egui-phosphor", "dep:rfd", "dep:libloading", "dep:notify", "dep:editor_plugin_api", "dep:rhai", "dep:image"]
runtime = []
dynamic = ["bevy/dynamic_linking"]

[[bin]]
name = "renzora_editor"
path = "src/main.rs"
required-features = ["editor"]

[[bin]]
name = "renzora_runtime"
path = "src/runtime/main.rs"
required-features = ["runtime"]

[dependencies]
bevy = { version = "0.18", features = ["jpeg"] }
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
ron = "0.8"
toml = "0.8"
dirs = "5.0"
zstd = "0.13"
gltf = "1.4"
image = { version = "0.25", optional = true }

# Editor-only dependencies
bevy_egui = { version = "0.39", optional = true }
egui-phosphor = { version = "0.11", features = ["regular", "fill"], optional = true }
rfd = { version = "0.15", optional = true }
rhai = { version = "1.21", features = ["sync"], optional = true }

# Plugin system dependencies (editor-only)
libloading = { version = "0.8", optional = true }
notify = { version = "6.0", optional = true }
editor_plugin_api = { path = "crates/editor_plugin_api", features = ["bevy"], optional = true }

[target.'cfg(windows)'.dependencies]
windows-sys = { version = "0.59", features = ["Win32_UI_WindowsAndMessaging", "Win32_Foundation"] }
winit = "0.30"

[workspace]
members = ["crates/editor_plugin_api", "crates/renzora-bevy-dylib"]

# Bevy recommended optimizations
# https://bevy.org/learn/quick-start/getting-started/setup/

[profile.dev]
opt-level = 1

[profile.dev.package."*"]
opt-level = 3

[profile.release]
lto = "thin"

[build-dependencies]
winres = "0.1"
